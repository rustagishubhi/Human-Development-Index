<html>

<head>
    <style>
        .line {
            fill: none;
            stroke: blue
        }
    </style>
</head>
<body>
    <svg id="container" height="300" width="500">
        <g id="body" transform="translate(50,50)"></g>
        <g id="xAxis"></g>
        <g id="yAxis"></g>
    </svg>
</body>
<script src="d3.js"></script>
<script>
    let body = d3.select("#body")
    d3.csv("data_indiaVworld.csv").then(showData)

    function showData(data) {
        let bodyHeight = 200
        let bodyWidth = 400

        // console.log(data);

        data = data.map(d => ({            
            date: new Date(d.Year, 31, 12),
            HDI_India: d.HDI_India,
            HDI_World: (d["Human Development Index - World"]?d["Human Development Index - World"]:0)
        }))
        

        console.log(data);

        let yScale = d3.scaleLinear()
            .range([bodyHeight, 0])
            .domain([0, 1]);

        body.append("g")    
            .call(d3.axisLeft(yScale));

        var minDate = new Date(1975,0,1)
        var max = d3.max(data, d => d.date)

        console.log(minDate)
        let xScale = d3.scaleTime()
            .domain([minDate,max])
            .range([0, bodyWidth]);

        body.append("g")
            .attr("transform", "translate(0," + bodyHeight + ")")
            .call(d3.axisBottom(xScale)
                .tickFormat(d3.timeFormat("%Y")))

        let indialine = d3.line()
            .x(d => xScale(d.date))
            .y(d => yScale(d.HDI_India))
            .defined(d => !!d.HDI_India);

        let worldline = d3.line()
            .x(d => xScale(d.date))
            .y(d => yScale(+d.HDI_World))
            .defined(d => !!(+d.HDI_World));

        body.append("path")
            .datum(data)
            .attr("d", worldline)
            .attr("class", "line");

        body.append("path")
            .datum(data)
            .attr("d", indialine)
            .attr("class", "line")

    }


</script>

</html>